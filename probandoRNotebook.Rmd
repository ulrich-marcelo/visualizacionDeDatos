---
title: "Inflación y Calidad de vida"
author: 
  - Licenciatura en Ciencias de Datos - UNSAM
  - Visualización de datos en R
  - Septiembre 2025
  - Marcelo Gabriel Ulrich
output:
  html_document:
    df_print: paged
    theme: journal
---

Siendo Argentinos, conocemos muy bien los efectos que tiene la inflación en la vida cotidiana. Pero, qué pasa en el resto del mundo?

Una forma de aproximar la "calidad de vida" es en función de la expectativa de vida.

En base a eso, decidí explorar como es la relación entre inflación y calidad de vida a nivel mundial. Pasa lo mismo en todo el mundo? Y a traves de los años? 

NOTAS:
- Los datos fueron procesados en python, haganme acordar de mostrar el codigo.
- Basicamente me quedé con los años que coincidían entre los datasets (lifeExp hay a partir del '61).


Primero cargo los datos y los exploro...


```{r message=FALSE, warning=FALSE}

# Load libraries
library(ggplot2)
library(gganimate)
library(readr)
library(dplyr)

# Load the dataset created in Python
df <- read_csv("data/inflationVsLifeExp.csv")

df <- df %>%
  mutate(
    inflation = as.numeric(gsub(",", ".", gsub("[^0-9,.-]", "", inflation))),
    lifeExp   = as.numeric(gsub(",", ".", gsub("[^0-9,.-]", "", lifeExp))),
    year      = as.integer(year)
  )

df_clean <- df %>%
  filter(!is.na(lifeExp), !is.na(inflation))

```




Primero me fijo que relación hay entre ambas variables y el tiempo. 

NOTA: de acá en adelante, cualquier gráfico con color pero sin leyenda es a proposito: me interesa diferenciar paises pero sin detallar cual es cual.


```{r message=FALSE, warning=FALSE}
ggplot(df_clean,
       aes(x = year,
           y = lifeExp,
           colour = country))+
  geom_line()+
  facet_wrap(vars(continent), scales = "free_y")+
  scale_color_viridis_d()+
  guides(colour = "none")+
  theme_minimal()+
  labs(title = "Expectativa de vida a través del tiempo",
       subtitle = "Segmentado por continente. Centro America figura como America del Norte*",
       y = "Expectativa de vida (años)",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

Podemos ver una tendencia general positiva de la expectativa de vida en relación al tiempo.

Algunos picos hacia abajo llaman la atención, pero al no ser algo general, asumo que serán cuestiones locales. Una que si es general y se replica en casi todos, es en 2021 por el covid (muy leve, pero este sí es general a todos)

Ahora a ver que pasa con la inflación...


```{r message=FALSE, warning=FALSE}
ggplot(df_clean,
       aes(x = year,
           y = inflation,
           colour = country))+
  geom_line(alpha = 0.5)+
  scale_color_viridis_d(option = 'magma')+
  facet_wrap(vars(continent), scales = "free_y")+
  guides(colour = "none")+
  theme_minimal()+
  labs(title = "Inflación a traves del tiempo",
       subtitle = "Segmentado por continente. Centro America figura como America del Norte*",
       y = "Inflación Interanual (%)",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

Es dificil ver la tendencia general por culpa de los picos de hiperinflación (parece que no somos los unicos).

Nota: este dato de inflación se mide usando la tasa de cambio del deflactor del PBI (Deflactor=(PIB_Real / PIB_Nominal)×100)

Pero si lo vemos en escala logaritmica...

```{r}
ggplot(df_clean,
       aes(x = year,
           y = inflation,
           colour = country))+
  geom_line(alpha = 0.5)+
  scale_y_log10(labels=scales::comma)+
  facet_wrap(vars(continent))+
  scale_color_viridis_d(option = 'magma')+
  guides(colour = "none")+
  theme_minimal()+
  labs(title = "Inflación a traves del tiempo",
       subtitle = "Segmentado por continente. Centro America figura como America del Norte*",
       y = "Inflación Interanual [log(%)]",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

Marca error porque hay valores menores a 0 de inflación (que lujo), haciendo que el log se vaya a -infinito. Para poder verlo mejor, tenemos el caso Argentino...

```{r}
ggplot(filter(df_clean, country %in% c('Argentina')),
       aes(x = year,
           y = inflation,
           colour = country))+
  geom_line(color = "#74ACDF", linewidth = 1) +
  scale_y_log10()+
  facet_wrap(vars(continent))+
  theme_minimal()+
  labs(title = "Inflación a traves del tiempo",
       y = "Inflación Interanual [log(%)]",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

En 1993 tuvimos -3% y el gráfico se rompe.

Para solucionar esto y poder ver tanto hiperinflación como deflación, uso la escala asinh (arcoseno hiperbolico)

Asinh tiene la ventaja de la escala logaritmica para valores grandes, distingue el signo y para valores chicos es casi lineal. Entonces los casos -inf, -1, 0, 1 e inf son distinguibles.

```{r}
ggplot(df_clean,
       aes(x = year,
           y = inflation,
           colour = country))+
  geom_line(alpha = 0.5)+
  scale_y_continuous("Inflación Interanual [asinh(%)]", trans = "asinh")+
  facet_wrap(vars(continent), scales = "free_y")+
  scale_color_viridis_d(option = 'magma')+
  guides(colour = "none")+
  theme_minimal()+
  labs(title = "Inflación a traves del tiempo",
       subtitle = "Segmentado por continente. Centro America figura como America del Norte*",
       y = "Inflación Interanual [asinh(%)]",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")

```

No se distingue bien por la cantidad de lineas, pero al ver Argentina...



```{r}

ggplot(filter(df_clean, country %in% c('Argentina')),
       aes(x = year,
           y = inflation,
           colour = country))+
  geom_line(color = "#74ACDF", linewidth = 1) +
  scale_y_continuous("Inflación Interanual [asinh(%)]", trans = "asinh")+
  facet_wrap(vars(continent))+
  theme_minimal()+
  labs(title = "Inflación a traves del tiempo",
       y = "Inflación Interanual [asinh(%)]",
       x = "Año de medición",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")

```

Con esta escala podemos distinguir y comparar años con inflación y deflación. Ejemplo: en Argentina, el año 1989 tuvo 3000% de inflación (el pico más alto del grafico), mientras que en 1993 tuvo -3% (pico inferior).



Ahora, que pasa entre la esperanza de vida y la inflación?



Primero gráfico todo sin dar cuenta del tiempo...

```{r}
ggplot(df_clean,
       aes(x = inflation,
           y = lifeExp,
           colour = country))+
  geom_point(alpha = 0.25)+
  scale_color_viridis_d()+
  guides(colour = "none")+
  scale_x_continuous("Inflación Interanual [asinh(%)])", trans = "asinh")+
  theme_minimal()+
  labs(title = "Correlación inflación interanual y esperanza de vida (1960-2024)",
       y = "Esperanza de vida (años)",
       x = "Inflación (asinh(%))",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")

```

No parece haber una correlación clara. A ver qué pasa si segmento por continente...

Nota: esta vez uso colores, para poder diferenciar (o intentar diferenciar) tendencias de cada pais, independientemente del nombre (por eso no hay leyenda)


```{r}
ggplot(df_clean,
       aes(x = inflation,
           y = lifeExp,
           colour = country))+
  geom_point(alpha = 0.5)+
  scale_x_continuous("Inflación Interanual [asinh(%)])", trans = "asinh")+
  theme_minimal()+
  facet_wrap(vars(continent), scales = "free_y")+
  guides(colour = "none")+
  scale_color_viridis_d()+
  labs(title = "Correlación inflación interanual y esperanza de vida (1960-2024)",
       subtitle = "Segmentado por continente. Centro America figura como America del Norte*",
       y = "Esperanza de vida (años)",
       x = "Inflación (asinh(%))",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```


No se entiende mucho, pero hay algo en SudAmerica que me llama la atención. Me fijo más en detalle...

```{r}
ggplot(filter(df_clean, continent == "South America"),
       aes(x = inflation,
           y = lifeExp,
           colour = country))+
  geom_point(alpha = 0.5)+
  scale_color_viridis_d()+
  scale_x_continuous("Inflación Interanual [asinh(%)])", trans = "asinh")+
  theme_minimal()+
  labs(title = "Correlación inflación interanual y esperanza de vida (1960-2024)",
       subtitle = "America del Sur",
       y = "Esperanza de vida (años)",
       x = "Inflación (asinh(%))",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

Sigue sin entenderse mucho... Vamos a ver un facetado por pais...

```{r}
ggplot(filter(df_clean, continent == "South America"),
       aes(x = inflation,
           y = lifeExp,
           colour = year))+
  geom_point(alpha = 0.25)+
  scale_x_continuous("Inflación Interanual [asinh(%)])", trans = "asinh")+
  theme_minimal()+
  facet_wrap(vars(country))+
  scale_color_viridis_c()+
  labs(title = "Correlación inflación interanual y esperanza de vida (1960-2024)",
       subtitle = "America del Sur",
       y = "Esperanza de vida (años)",
       x = "Inflación (asinh(%))",
       caption = "Fuente: Gapminder @ https://www.gapminder.org/data/")
```

No hay un patrón claro (además del ya visto a traves del tiempo).

Los casos de Bolivia, Brasil, Chile y Peru me parecen interesantes, ya que los picos de inflación están aproximadamente en la media de la esperanza de vida. Quizas viendolo a través del tiempo nos de algo más de información... (agrego a Argentina por ser Argentino y comparar nomás)


```{r message=FALSE, warning=FALSE}
ggplot(
  filter(df_clean, country %in% c("Argentina","Brazil","Bolivia","Chile","Peru")),
  aes(x = inflation, y = lifeExp)
) +
  geom_path(linewidth = 1) + 
  scale_x_continuous("Inflación Interanual [asinh(%)])", trans = "asinh") +
  facet_wrap(vars(country)) +
  theme_minimal() +
  labs(
    title = "Correlación inflación interanual y esperanza de vida a través del tiempo",
    subtitle = "Año: {round(frame_along)}",
    y = "Esperanza de vida (años)",
    x = "Inflación (asinh(%))",
    caption = "Fuente: Gapminder @ https://www.gapminder.org/data/"
  ) +
  transition_reveal(along = year) +
  ease_aes("linear")
```


A partir de estos gráficos no se me ocurre una conclusión interesante.

Se hace casi evidente que la esperanza de vida no depende de la inflación. En los gráficos anteriores y en este se ve claramente cómo la esperanza de vida sube con el tiempo, independientemente de la inflación.

Ustedes qué opinan? Hay algo que se les ocurra para probar? O simplemente la inflación no afecta la esperanza de vida de un pais?

